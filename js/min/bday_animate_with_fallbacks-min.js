$(window).load(function(){function o(o){o.removeAttribute("type"),o.removeAttribute("data"),o.className="svgfallback"}function e(){if(g===!0){if(u!==!1)return;o(y)}else{var e=[y,b,k],n=e.length,t;for(t=0;n>t;t++)o(e[t])}}function n(o){return o||(o=window.event),o.target||o.srcElement}function t(o){o.stopPropagation?o.stopPropagation():o.cancelBubble=!0}function i(o){o.preventDefault?o.preventDefault():o.returnValue=!1}function l(o,e,n){o.addEventListener?o.addEventListener(e,n,!1):(o["e"+e+n]=n,o[e+n]=function(){o["e"+e+n](window.event)},o.attachEvent("on"+e,o[e+n]))}function c(){console.log("starting scOpeningAnimation"),$.Velocity(b,{translateY:[-h,"0px"]}),$.Velocity(k,{translateY:[h,"0px"]}),$.Velocity.RunSequence(E)}function a(){console.log("starting smilOpeningAnimation"),console.log("calling scOpeningAnimation"),c(),console.log("continuing smilOpeningAnimation of flames flickering"),$(P).velocity({translateX:[.8,0],translateY:[4.8,0],scale:[.8,1]},{duration:1e3,loop:!0})}function s(){u===!0?(console.log("calling smilOpeningAnimation"),a()):m===!0?(console.log("calling scOpeningAnimation"),c()):(console.log("no support for anything fun...serving boring fallback"),$.Velocity(k,{top:[h,0]},{display:"none",complete:function(){console.log("step1 done")}}),$.Velocity(b,{top:[-h,0]},{display:"none",complete:function(){console.log("step2 done")}}),$.Velocity(f,{opacity:[0,1]},{duration:1500,delay:100,display:"none",complete:function(){console.log("step3 done")}}),$.Velocity(k,{top:[0,h]},{duration:5e3,delay:1600,display:"block",complete:function(){console.log("step4 done")}}),$.Velocity(b,{top:[0,-h]},{duration:4e3,delay:5600,display:"block",complete:function(){console.log("step5 done")}}),$.Velocity(x,"fadeIn",{duration:500,delay:9600,display:"inline-block",complete:function(){console.log("step6 done")}}))}function r(){console.log("starting scFinishingAnimation"),$(A).velocity("fadeOut",{duration:500,display:"none"}),u===!0?(console.log("starting smil blow out animation"),$(P).velocity("stop"),$(P).velocity({translateX:[4,0],translateY:[24,0],scale:[0,1]},1e3,function(){$(I).velocity({strokeDashoffset:["0","110"]},1500).velocity({strokeDashoffset:["-110","0"]},1500)})):(console.log("starting spriteSmotherNSmoke animation"),$(y).velocity("spriteSmotherNSmoke")),$.Velocity.RunSequence(V)}function p(o){var e=n(o);console.log("targetObj for initialAnimation = "+e.id),"continue"===e.id?(i(o),console.log("(initialAnimation)called prevDef for "+e.id+" on click"),console.log("calling determineOpeningAnimation"),s()):(console.log("(initialAnimation)calling stopProp for "+e.id+" on click"),t(o))}function d(o){var e=n(o);console.log("targetObj for continuedAnimation = "+e.id),"blow_out"===e.id?(i(o),console.log("(contiunedAnimation)called prevDef for "+e.id+" on click"),console.log("calling scFinishingAnimation"),r()):"replay"===e.id?window.location.reload():(console.log("(contiunedAnimation)calling stopProp for "+e.id+" on click"),t(o))}var u=Modernizr.smil,g=Modernizr.svg,m=Modernizr.cssanimations,f=document.getElementById("overlay"),y=document.getElementById("cake_obj"),b=document.getElementById("banner_obj"),k=document.getElementById("balloons_obj"),v=document.getElementById("underlay"),A=document.getElementById("blow_out"),x=document.getElementById("button_subg"),h=function(){var o=document.body,e=$(o).height();return e}(),E=[{elements:f,properties:{opacity:[0,1]},options:{duration:1500,delay:100,display:"none"}},{elements:y,properties:{scale:[.5,1]},options:{duration:1500}},{elements:b,properties:{translateY:["0px",-h]},options:{duration:4e3,display:"block",sequenceQueue:!1}},{elements:y,properties:"reverse",options:{duration:1500,sequenceQueue:!1}},{elements:A,properties:"fadeIn",options:{duration:500,display:"block"}},{elements:A,properties:"callout.shake"}],V=[{elements:k,properties:{translateY:["0px",h]},options:{duration:5e3,display:"block"}},{elements:x,properties:"fadeIn",options:{duration:500,display:"inline-block"}}],w=g?y.contentDocument:null,P=u?w.querySelectorAll(".flame_group"):null,I=u?w.querySelectorAll(".smoke"):null;$.Velocity.RegisterEffect("spriteSmotherNSmoke",{defaultDuration:1e3,calls:[[{backgroundPositionX:["-500px","-500px"]},.15],[{backgroundPositionX:["-1000px","-1000px"]},.15],[{backgroundPositionX:["-1500px","-1500px"]},.15],[{backgroundPositionX:["-2000px","-2000px"]},.15],[{backgroundPositionX:["-2500px","-2500px"]},.15],[{backgroundPositionX:["-3000px","-3000px"]},.25]],reset:{backgroundPositionX:"-3000px"}}),e(),l(f,"click",p),l(v,"click",d)});