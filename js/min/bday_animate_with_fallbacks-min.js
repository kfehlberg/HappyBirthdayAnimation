var smilSupport=Modernizr.smil?!0:!1,svgSupport=Modernizr.svg?!0:!1;$(window).load(function(){function e(e){if(e.hasAttribute("type")){var t=e.getAttribute("type");if("image/svg+xml"===t){var o=e.contentDocument;if(null!=o){var n=o.querySelector("svg");n.setAttribute("visibility","hidden")}e.removeAttribute("type")}}e.hasAttribute("data")&&e.removeAttribute("data"),"svg"===e.className&&(e.className="svgfallback")}function t(){if(!1)if(svgSupport)e(m);else{var t=[m,y,f],o=t.length,n;for(n=0;o>n;n++)e(t[n])}}function o(e){return e||(e=window.event),e.target||e.srcElement}function n(e){if(e){if(!e.stopPropagation)return!1;e.stopPropagation()}else e.cancelBubble=!0}function i(e){if(e){if(!e.preventDefault)return!1;e.preventDefault()}else e.returnValue=!1}function r(e,t,o){e.addEventListener?e.addEventListener(t,o,!1):(e["e"+t+o]=o,e[t+o]=function(){e["e"+t+o](window.event)},e.attachEvent("on"+t,e[t+o]))}function l(){$.Velocity(y,{translateY:[-x,"0px"]}),$.Velocity(f,{translateY:[x,"0px"]}),$.Velocity.RunSequence(S)}function a(){l(),$(I).velocity({translateX:[.8,0],translateY:[4.8,0],scale:[.8,1]},{duration:1e3,loop:!0})}function s(){smilSupport?a():l()}function u(){$(g).velocity("fadeOut",{duration:500,display:"none"}),smilSupport?($(I).velocity("stop"),$(I).velocity({translateX:[4,0],translateY:[24,0],scale:[0,1]},1e3,function(){$(w).velocity({strokeDashoffset:["0","110"]},1500).velocity({strokeDashoffset:["-110","0"]},1500)}),$.Velocity.RunSequence(h)):($(m).velocity("spriteSmotherNSmoke"),$.Velocity.RunSequence(h))}function c(e){var t=o(e);"continue"===t.id?(s(),i(e)):n(e)}function p(e){var t=o(e);"blow_out"===t.id?(u(),i(e)):"replay"===t.id?window.location.reload():"github"===t.id?n(e):i(e)}var d=document.getElementById("overlay"),m=document.getElementById("cake_obj"),y=document.getElementById("banner_obj"),f=document.getElementById("balloons_obj"),v=document.getElementById("underlay"),g=document.getElementById("blow_out"),b=document.getElementById("replay"),k=document.getElementById("github"),x=function(){var e=document.body,t=$(e).height();return t}(),S=[{elements:d,properties:{opacity:[0,1]},options:{duration:1500,delay:100,display:"none"}},{elements:m,properties:{scale:[.5,1]},options:{duration:1500}},{elements:y,properties:{translateY:["0px",-x]},options:{duration:4e3,display:"block",sequenceQueue:!1}},{elements:m,properties:"reverse",options:{duration:1500,sequenceQueue:!1}},{elements:g,properties:"fadeIn",options:{duration:500,display:"block"}},{elements:g,properties:"callout.shake"}],h=[{elements:f,properties:{translateY:["0px",x]},options:{duration:5e3,display:"block"}},{elements:b,properties:"fadeIn",options:{duration:500,display:"inline-block"}},{elements:k,properties:"fadeIn",options:{duration:500,display:"inline-block",sequenceQueue:!1}}],E=svgSupport?m.contentDocument:null,I=smilSupport?E.querySelectorAll(".flame_group"):null,w=smilSupport?E.querySelectorAll(".smoke"):null;$.Velocity.RegisterUI("spriteSmotherNSmoke",{defaultDuration:1e3,calls:[[{backgroundPositionX:["-500px","-500px"]},.15],[{backgroundPositionX:["-1000px","-1000px"]},.15],[{backgroundPositionX:["-1500px","-1500px"]},.15],[{backgroundPositionX:["-2000px","-2000px"]},.15],[{backgroundPositionX:["-2500px","-2500px"]},.15],[{backgroundPositionX:["-3000px","-3000px"]},.25]],reset:{backgroundPositionX:"-3000px"}}),t(),r(d,"click",c),r(v,"click",p)});
