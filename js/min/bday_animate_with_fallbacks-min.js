$(window).load(function(){function n(n){null!=n.contentDocument&&n.contentDocument.querySelector("svg").setAttribute("visibility","hidden"),n.removeAttribute("type"),n.removeAttribute("data"),n.className="svgfallback",console.log(n.id+" : new class name = "+n.className)}function e(){if(m===!0){if(g!==!1)return;n(b)}else{var e=[b,v,k],o=e.length,t;for(t=0;o>t;t++)n(e[t])}}function o(n){return n||(n=window.event),n.target||n.srcElement}function t(n){n.stopPropagation?n.stopPropagation():n.cancelBubble=!0}function i(n){n.preventDefault?n.preventDefault():n.returnValue=!1}function l(n,e,o){n.addEventListener?n.addEventListener(e,o,!1):(n["e"+e+o]=o,n[e+o]=function(){n["e"+e+o](window.event)},n.attachEvent("on"+e,n[e+o]))}function a(){var n=[x,h,k,v],e=n.length,o;for(o=0;e>o;o++)console.log("calling elsToHide for "+n[o].id),n[o].style.display="none"}function s(){console.log("starting scOpeningAnimation"),a(),$.Velocity(v,{translateY:[-w,"0px"]}),$.Velocity(k,{translateY:[w,"0px"]}),$.Velocity.RunSequence(E)}function c(){console.log("starting smilOpeningAnimation"),console.log("calling scOpeningAnimation"),s(),console.log("continuing smilOpeningAnimation of flames flickering"),$(S).velocity({translateX:[.8,0],translateY:[4.8,0],scale:[.8,1]},{duration:1e3,loop:!0})}function r(){g===!0?(console.log("calling smilOpeningAnimation"),c()):f===!0?(console.log("calling scOpeningAnimation"),s()):(console.log("no support for anything fun...serving boring fallback"),x.style.display="none",h.style.display="none",$.Velocity(y,"fadeOut",{duration:1500,delay:100,display:"none",complete:function(){console.log("step1 done")}}),$.Velocity(h,"fadeIn",{duration:600,delay:1600,display:"inline-block",complete:function(){console.log("step2 done")}}))}function u(){console.log("starting scFinishingAnimation"),$(x).velocity("fadeOut",{duration:500,display:"none"}),g===!0?(console.log("starting smil blow out animation"),$(S).velocity("stop"),$(S).velocity({translateX:[4,0],translateY:[24,0],scale:[0,1]},1e3,function(){$(D).velocity({strokeDashoffset:["0","110"]},1500).velocity({strokeDashoffset:["-110","0"]},1500)})):(console.log("starting spriteSmotherNSmoke animation"),$(b).velocity("spriteSmotherNSmoke")),$.Velocity.RunSequence(O)}function d(n){var e=o(n);console.log("targetObj for initialAnimation = "+e.id),"continue"===e.id?(i(n),console.log("(initialAnimation)called prevDef for "+e.id+" on click"),console.log("calling determineOpeningAnimation"),r()):(console.log("(initialAnimation)calling stopProp for "+e.id+" on click"),t(n))}function p(n){var e=o(n);console.log("targetObj for continuedAnimation = "+e.id),"blow_out"===e.id?(i(n),console.log("(contiunedAnimation)called prevDef for "+e.id+" on click"),console.log("calling scFinishingAnimation"),u()):"replay"===e.id?window.location.reload():(console.log("(contiunedAnimation)calling stopProp for "+e.id+" on click"),t(n))}var g=Modernizr.smil,m=Modernizr.svg,f=Modernizr.csstransforms,y=document.getElementById("overlay"),b=document.getElementById("cake_obj"),v=document.getElementById("banner_obj"),k=document.getElementById("balloons_obj"),A=document.getElementById("underlay"),x=document.getElementById("blow_out"),h=document.getElementById("button_subg"),w=function(){var n=document.body,e=$(n).height();return e}(),E=[{elements:y,properties:{opacity:[0,1]},options:{duration:1500,delay:100,display:"none"}},{elements:b,properties:{scale:[.5,1]},options:{duration:1500}},{elements:v,properties:{translateY:["0px",-w]},options:{duration:4e3,display:"block",sequenceQueue:!1}},{elements:b,properties:"reverse",options:{duration:1500,sequenceQueue:!1}},{elements:x,properties:"fadeIn",options:{duration:500,display:"block"}},{elements:x,properties:"callout.shake"}],O=[{elements:k,properties:{translateY:["0px",w]},options:{duration:5e3,display:"block"}},{elements:h,properties:"fadeIn",options:{duration:500,display:"inline-block"}}],P=m?b.contentDocument:null,S=g?P.querySelectorAll(".flame_group"):null,D=g?P.querySelectorAll(".smoke"):null;$.Velocity.RegisterEffect("spriteSmotherNSmoke",{defaultDuration:1e3,calls:[[{backgroundPositionX:["-500px","-500px"]},.15],[{backgroundPositionX:["-1000px","-1000px"]},.15],[{backgroundPositionX:["-1500px","-1500px"]},.15],[{backgroundPositionX:["-2000px","-2000px"]},.15],[{backgroundPositionX:["-2500px","-2500px"]},.15],[{backgroundPositionX:["-3000px","-3000px"]},.25]],reset:{backgroundPositionX:"-3000px"}}),e(),l(y,"click",d),l(A,"click",p)});