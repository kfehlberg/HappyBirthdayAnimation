$(window).load(function(){function e(e){e.hasAttribute("data")&&e.removeAttribute("data"),e.hasAttribute("type")&&e.removeAttribute("type"),"svg"===e.className&&(e.className="svgfallback")}function t(){if(Modernizr.smil)console.log("YAY! SMIL animation supported!");else if(Modernizr.svg)e(u),console.log("Boo.  SMIL animation not supported. But the good news is that SVG IS!");else{var t=[u,d,p],o=t.length,n;for(n=0;o>n;n++)e(t[n]);console.log("Boo. SMIL and SVG are not supported")}}function o(e,t){e.addEventListener?e.addEventListener("click",t,!1):e.attachEvent("click",t)}function n(){$.Velocity(d,{translateY:[-f,"0px"]}),$.Velocity(p,{translateY:[f,"0px"]}),$.Velocity.RunSequence(v)}function i(){n(),$(x).velocity({translateX:[.8,0],translateY:[4.8,0],scale:[.8,1]},{duration:1e3,loop:!0})}function a(){Modernizr.smil?i():Modernizr.cssanimations?n():($(c).velocity("fadeOut",{display:"none"}),console.log("No animation support"))}function s(){$(y).velocity("fadeOut",{duration:500,display:"none"}),Modernizr.smil?($(x).velocity("stop"),$(x).velocity({translateX:[4,0],translateY:[24,0],scale:[0,1]},1e3,function(){$(h).velocity({strokeDashoffset:["0","110"]},1500).velocity({strokeDashoffset:["-110","0"]},1500)}),$.Velocity.RunSequence(b)):($(u).velocity("spriteSmotherNSmoke"),$.Velocity.RunSequence(b))}function l(e){0||a(),e.stopPropagation()}function r(e){"blow_out"===e.target.id?s():"replay"===e.target.id&&window.location.reload(),e.stopPropagation()}console.log("window loaded");var c=document.getElementById("overlay"),u=document.getElementById("cake_obj"),d=document.getElementById("banner_obj"),p=document.getElementById("balloons_obj"),m=document.getElementById("underlay"),y=document.getElementById("blow_out"),g=document.getElementById("replay"),f=function(){var e=document.body,t=$(e).height(),o=$(m).height();return t>o?t+100:t+100}(),v=[{elements:c,properties:{opacity:[0,1]},options:{duration:1500,delay:100,display:"none"}},{elements:u,properties:{scale:[.5,1]},options:{duration:1500}},{elements:d,properties:{translateY:["0px",-f]},options:{duration:4e3,sequenceQueue:!1}},{elements:u,properties:"reverse",options:{duration:1500,sequenceQueue:!1}},{elements:y,properties:"fadeIn",options:{duration:500,display:"block"}},{elements:y,properties:"callout.shake"}],b=[{elements:p,properties:{translateY:["0px",f]},options:{duration:5e3}},{elements:g,properties:"fadeIn",options:{duration:500,display:"block"}}],k=u.contentDocument,x=k.querySelectorAll("svg .flame_group"),h=k.querySelectorAll("svg .smoke");$.Velocity.RegisterUI("spriteSmotherNSmoke",{defaultDuration:1e3,calls:[[{backgroundPositionX:["-500px","-500px"]},.15],[{backgroundPositionX:["-1000px","-1000px"]},.15],[{backgroundPositionX:["-1500px","-1500px"]},.15],[{backgroundPositionX:["-2000px","-2000px"]},.15],[{backgroundPositionX:["-2500px","-2500px"]},.15],[{backgroundPositionX:["-3000px","-3000px"]},.25]],reset:{backgroundPositionX:"-3000px"}}),t(),o(c,l),o(m,r)});