$(window).load(function(){function e(e){null!=e.contentDocument&&e.contentDocument.querySelector("svg").setAttribute("visibility","hidden"),e.removeAttribute("type"),e.removeAttribute("data"),e.className="svgfallback"}function t(){if(f===!0){if(y!==!1)return;e(v)}else{var t=[v,g,k],n=t.length,o;for(o=0;n>o;o++)e(t[o])}}function n(e){return e||(e=window.event),e.target||e.srcElement}function o(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function i(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function l(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):(e["e"+t+n]=n,e[t+n]=function(){e["e"+t+n](window.event)},e.attachEvent("on"+t,e[t+n]))}function r(){var e=[E,h,k,g],t=e.length,n;for(n=0;t>n;n++)e[n].style.display="none"}function a(){r(),$.Velocity(g,{translateY:[-w,"0px"]}),$.Velocity(k,{translateY:[w,"0px"]}),$.Velocity.RunSequence(I)}function s(){a(),$(X).velocity({translateX:[.8,0],translateY:[4.8,0],scale:[.8,1]},{duration:1e3,loop:!0})}function u(){y===!0?s():m===!0?a():(E.style.display="none",h.style.display="none",$.Velocity(b,"fadeOut",{duration:1500,delay:100,display:"none"}),$.Velocity(h,"fadeIn",{duration:600,delay:1600,display:"inline-block"}))}function c(){$(E).velocity("fadeOut",{duration:500,display:"none"}),y===!0?($(X).velocity("stop"),$(X).velocity({translateX:[4,0],translateY:[24,0],scale:[0,1]},1e3,function(){$(B).velocity({strokeDashoffset:["0","110"]},1500).velocity({strokeDashoffset:["-110","0"]},1500)})):$(v).velocity("spriteSmotherNSmoke"),$.Velocity.RunSequence(P)}function d(e){var t=n(e);"continue"===t.id?(i(e),u()):o(e)}function p(e){var t=n(e);"blow_out"===t.id?(i(e),c()):"replay"===t.id?window.location.reload():o(e)}var y=Modernizr.smil,f=Modernizr.svg,m=Modernizr.csstransforms,b=document.getElementById("overlay"),v=document.getElementById("cake_obj"),g=document.getElementById("banner_obj"),k=document.getElementById("balloons_obj"),x=document.getElementById("underlay"),E=document.getElementById("blow_out"),h=document.getElementById("button_subg"),w=function(){var e=document.body,t=$(e).height();return t}(),I=[{elements:b,properties:{opacity:[0,1]},options:{duration:1500,delay:100,display:"none"}},{elements:v,properties:{scale:[.5,1]},options:{duration:1500}},{elements:g,properties:{translateY:["0px",-w]},options:{duration:4e3,display:"block",sequenceQueue:!1}},{elements:v,properties:"reverse",options:{duration:1500,sequenceQueue:!1}},{elements:E,properties:"fadeIn",options:{duration:500,display:"block"}},{elements:E,properties:"callout.shake"}],P=[{elements:k,properties:{translateY:["0px",w]},options:{duration:5e3,display:"block"}},{elements:h,properties:"fadeIn",options:{duration:500,display:"inline-block"}}],S=f?v.contentDocument:null,X=y?S.querySelectorAll(".flame_group"):null,B=y?S.querySelectorAll(".smoke"):null;$.Velocity.RegisterEffect("spriteSmotherNSmoke",{defaultDuration:1e3,calls:[[{backgroundPositionX:["-500px","-500px"]},.15],[{backgroundPositionX:["-1000px","-1000px"]},.15],[{backgroundPositionX:["-1500px","-1500px"]},.15],[{backgroundPositionX:["-2000px","-2000px"]},.15],[{backgroundPositionX:["-2500px","-2500px"]},.15],[{backgroundPositionX:["-3000px","-3000px"]},.25]],reset:{backgroundPositionX:"-3000px"}}),t(),l(b,"click",d),l(x,"click",p)});